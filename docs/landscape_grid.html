<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type">
  <meta name="Description" content="Structure of OpenTTD (OTTD) landscape arrays #2">
  <title>OpenTTD Landscape Internals - #2</title>
  <style type="text/css">
    span.abuse { font-family: "Courier New", Courier, mono; background-color: rgb(255, 58, 31); }
    span.free  { font-family: "Courier New", Courier, mono; background-color: rgb(30, 178, 54); }
    span.used  { font-family: "Courier New", Courier, mono; }
    td.bits    { white-space: nowrap; text-align: center; font-family: "Courier New", Courier, mono; }
    td.caption { white-space: nowrap; text-align: left; }
    td li      { white-space: nowrap; text-align: left; }
    th         { white-space: nowrap; text-align: center; }
  </style>
</head>
<body style="direction: ltr;">
<h3 style="font-weight: bold;">Landscape</h3>
<span style="font-weight: bold;"></span>Five attributes hold the information about a tile.
This can be seen in the <a href="landscape.html">Landscape</a> document. This page tries to give an overview of used and free bits of
the array so you can quickly see what is used and what is not.
<ul>
  <li><span style="font-weight: bold;"><span class="free">O</span></span> - bit is free</li>
  <li><span style="font-weight: bold;"><span class="used">X</span></span> - bit is used</li>
  <li><span style="font-weight: bold;"><span class="abuse">&nbsp;</span></span> - bit of attribute is abused for different purposes</li>
  <li><b>NOTE: </b>counting the bits starts with bit0 in the most left position (eg. a bit screwed LE format; BIT by BIT) </li>
</ul>
<p>
<ul>
  <li><span style="font-weight: bold;">type_height</span> - 8 bits in size, stores tile height (lower 4 bits) and tile class (upper 4 bits)</li>
  <li><span style="font-weight: bold;">m1</span> - 8 bits in size, used to identify the owner of that tile (eg piece of rail, bridge, etc.)</li>
  <li><span style="font-weight: bold;">m2</span> - 16 bits in size, used to identify the index of the given tile (object) in the (object-)array</li>
  <li><span style="font-weight: bold;">m3</span> - 8 bits in size, is used for general storage</li>
  <li><span style="font-weight: bold;">m4</span> - 8 bits in size, is used for general storage</li>
  <li><span style="font-weight: bold;">m5</span> - 8 bits in size, is used for general storage</li>
</ul>

<table style="text-align: left;" border="1" cellpadding="2"
 cellspacing="2" width="100%">
  <tbody>
    <tr>
      <th>class</th>
      <th>m1 (8)</th>
      <th>m2 (16)</th>
      <th>m3 (8)</th>
      <th>m4 (8)</th>
      <th>type_height (8)</th>
      <th>m5 (8)</th>
    </tr>
    <tr>
      <td class="caption">bits</td>
      <td class="bits">0123 4567</td>
      <td class="bits">0123 4567 0123 4567</td>
      <td class="bits">0123 4567</td>
      <td class="bits">0123 4567</td>
      <td class="bits">0123 4567</td>
      <td class="bits">0123 4567</td>
    </tr>
    <tr>
      <td class="caption">(0) ground</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits"><span class="free">OOOO OOOO OOOO OOOO</span></td>
      <td class="bits">XXXX <span class="free">OOOO</span></td>
      <td class="bits"><span class="free">OO</span>XX XXXX</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX X<span class="free">O</span>XX</td>
    </tr>
    <tr>
      <td class="caption">(1) rail</td>
      <td class="bits"><span class="abuse">XXXX XXXX</span></td>
      <td class="bits">XXXX XXXX <span class="free">OOOO OOOO</span></td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX</td>
    </tr>
    <tr>
      <td>
      <ul>
        <li>depot/checkpoint</li>
      </ul>
      </td>
      <td class="bits">-inherit-</td>
      <td class="bits"><span class="free">OOOO OOOO OOOO OOOO</span></td>
      <td class="bits">XXXX X<span class="free">OOO</span></td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">-inherit-</td>
      <td class="bits">XXX<span class="free">O OO</span>XX</td>
    </tr>
    <tr>
      <td class="caption">(2) road</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits"><span class="abuse">XXXX XXXX XXXX XXXX</span></td>
      <td class="bits"><span class="free">OOOO OOOO</span></td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX</td>
    </tr>
    <tr>
      <td>
      <ul>
        <li>level crossing</li>
      </ul>
      </td>
      <td class="bits">-inherit-</td>
      <td class="bits"><span class="abuse">XXXX XXXX XXXX XXXX</span></td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">-inherit-</td>
      <td class="bits"><span class="free">OO</span>XX XXXX</td>
    </tr>
    <tr>
      <td>
      <ul>
        <li>road depot</li>
      </ul>
      </td>
      <td class="bits">-inherit-</td>
      <td class="bits"><span class="free">OOOO OOOO OOOO OOOO</span></td>
      <td class="bits"><span class="free">OOOO OOOO</span></td>
      <td class="bits"><span class="free">OOOO OOO</span>X</td>
      <td class="bits">-inherit-</td>
      <td class="bits">XXXX XXXX</td>
    </tr>
    <tr>
      <td class="caption">(3) town</td>
      <td class="bits"><span class="abuse">XXXX XXXX</span></td>
      <td class="bits">XXXX XXXX XXXX XXXX</td>
      <td class="bits"><span class="free">OOOO OO</span>XX</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XX<span class="free">O</span>X</td>
    </tr>
    <tr>
      <td class="caption">(4) trees</td>
      <td class="bits"><span class="abuse">XXXX XXXX</span></td>
      <td class="bits">XXXX XX<span class="free">OO OOOO OOOO</span></td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits"><span class="free">OO</span>XX XXXX</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXX<span class="free">O OO</span>XX</td>
    </tr>
    <tr>
      <td class="caption">(5) station</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX XXXX XXXX</td>
      <td class="bits">XXXX X<span class="free">OOO</span></td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX</td>
    </tr>
    <tr>
      <td class="caption">(6) water</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits"><span class="free">OOOO OOOO OOOO OOOO</span></td>
      <td class="bits"><span class="free">OOOO OOOO</span></td>
      <td class="bits"><span class="free">OOOO OOOO</span></td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX</td>
    </tr>
    <tr>
      <td class="caption">(8) industry</td>
      <td class="bits"><span class="abuse">XXXX X</span><span class="free">OO</span><span class="abuse">X</span></td>
      <td class="bits">XXXX XXXX XXXX XXXX</td>
      <td class="bits"><span class="free">OOOO OOOO</span></td>
      <td class="bits"><span class="free">OOOO OOOO</span></td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX</td>
    </tr>
    <tr>
      <td>
      <ul>
        <li>bubble/sugar/toffee</li>
      </ul>
      </td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits"><span class="free">OOOO OOOO</span></td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
    </tr>
    <tr>
      <td>
      <ul>
        <li>toy factory</li>
      </ul>
      </td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
    </tr>
    <tr>
      <td>
      <ul>
        <li>gold/copper/coal</li>
      </ul>
      </td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
    </tr>
    <tr>
      <td>
      <ul>
        <li>oil wells</li>
      </ul>
      </td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
    </tr>
    <tr>
      <td>
      <ul>
        <li>power station</li>
      </ul>
      </td>
      <td class="bits">XXXX XX<span class="free">O</span>X</td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
      <td class="bits">-inherit-</td>
    </tr>
    <tr>
      <td class="caption">(9) tunnel</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits"><span class="free">OOOO OOOO OOOO OOOO</span></td>
      <td class="bits">XXXX <span class="free">OOOO</span></td>
      <td class="bits"><span class="free">OOOO OOO</span>X</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX</td>
    </tr>
    <tr>
      <td>
      <ul>
        <li>bridge</li>
      </ul>
      </td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits"><span class="abuse">XXXX XXXX</span> <span class="free">OOOO OOOO</span></td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits"><span class="free">OOOO OOO</span>X</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX</td>
    </tr>
    <tr>
      <td class="caption">(10) various (HQ)</td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits"><span class="free">OOOO OOOO OOOO OOOO</span></td>
      <td class="bits"><span class="free">OOOO OOOO</span></td>
      <td class="bits"><span class="free">OOOO OOOO</span></td>
      <td class="bits">XXXX XXXX</td>
      <td class="bits">XXXX XXXX</td>
    </tr>
  </tbody>
</table>

</body>
</html>
